<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Hola</h1>
    <input type="email" name="" id="email">
    <input type="password" name="" id="password">
    <H1>Registro</H1>
    <input type="email" id="emailSignUp" placeholder="Correo electrónico">
    <input type="password" id="passwordSignUp" placeholder="Contraseña">
    <input type="text" id="displayNameSignUp" placeholder="Nombre de usuario">
    <button id="registerButton">Registrar</button>
    <button id="loginButton">Click</button>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.14.0/firebase-auth-compat.js"></script>
    <script>
        const firebaseApp = firebase.initializeApp({
            apiKey: "AIzaSyB2S--M6FdhqkgB9lMosxKb40CUdPio5Zc",
            authDomain: "juegovertigo.firebaseapp.com",
            databaseURL: "https://juegovertigo-default-rtdb.firebaseio.com",
            projectId: "juegovertigo",
            storageBucket: "juegovertigo.appspot.com",
            messagingSenderId: "850388292562",
            appId: "1:850388292562:web:88aaa44c4571f5cf05ee0b",
            measurementId: "XXXXXXXXXXXXX"
        });
        const db = firebaseApp.database();
        const auth = firebaseApp.auth();
    </script>
    <script>
        // Obtén las referencias a los campos de entrada de correo electrónico y contraseña
        var emailField = document.getElementById("email");
        var passwordField = document.getElementById("password");

        // Agrega un event listener al botón de inicio de sesión
        document.getElementById("loginButton").addEventListener("click", function () {
            var email = emailField.value;
            var password = passwordField.value;

            // Llama al método de inicio de sesión de Firebase con el correo electrónico y contraseña proporcionados
            firebase.auth().signInWithEmailAndPassword(email, password)
                .then(function (userCredential) {
                    // Inicio de sesión exitoso, redirige al usuario al juego
                    window.location.href = "index.html";
                })
                .catch(function (error) {
                    // Manejo de errores de inicio de sesión
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.log(errorCode, errorMessage);
                });
        });
        // Obtener referencias a los campos de entrada
        const emailFieldSignUp = document.getElementById("emailSignUp");
        const passwordFieldSignUp = document.getElementById("passwordSignUp");
        const displayNameFieldSignUp = document.getElementById("displayNameSignUp");
        const registerButton = document.getElementById("registerButton");
        registerButton.addEventListener("click", function () {
            const email = emailFieldSignUp.value;
            const password = passwordFieldSignUp.value;
            const displayName = displayNameFieldSignUp.value;

            // Crear un usuario con correo electrónico y contraseña
            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then(function (userCredential) {
                    // Establecer el nombre de usuario (displayName) del usuario
                    userCredential.user.updateProfile({
                        displayName: displayName
                    })
                        .then(function () {
                            // Registro exitoso, redirigir al usuario al juego
                            window.location.href = "game.html";
                        })
                        .catch(function (error) {
                            // Manejo de errores al establecer el displayName
                            console.error(error);
                        });
                })
                .catch(function (error) {
                    // Manejo de errores de registro
                    console.error(error);
                });
        });
    </script>
</body>

</html>